<div class="box wide">
  <div class="legend">
    <%= t :RequestedHats %>
  </div>

  <% if @hat_requests.count == 0 %>
    <%= t :NoHatRequests %>
  <% else %>
    <% @hat_requests.each_with_index do |hr,x| %>
      <% if x > 0 %>
        <hr>
      <% end %>

      <%= form_for hr, :url => approve_hat_request_url(:id => hr),
      :method => :post do |f| %>
        <p>
        <div class="boxline">
          <%= f.label :user_id, t("UserLabel"), :class => "required" %>
          <a href="/u/<%= hr.user.username %>"><%= hr.user.username %></a>
        </div>

        <div class="boxline">
          <%= f.label :hat, t("HatLabel"), :class => "required" %>
          <%= f.text_field "hat", :size => 25 %>
        </div>

        <div class="boxline">
          <%= f.label :link, t("LinkLabel"), :class => "required" %>
          <%= f.text_field "link", :size => 75 %>
          <% if hr.link.to_s.match(/^http/) %>
            <br>
            <%= f.label :link, t("LinkLabel"), :class => "required" %>
            <a href="<%= hr.link %>" rel="nofollow"><%= hr.link %></a>
          <% end %>
        </div>

        <div class="boxline">
          <%= f.label :link, t("CommentLabel"), :class => "required" %>
          <div class="d">
            <%= raw(h(hr.comment.to_s).gsub(/\n/, "<br>")) %>
          </div>
        </div>

        <p style="clear: both;">
        <%= submit_tag t("ApproveHatRequest") %>
        </p>
      <% end %>
      <p>
      or
      </p>
      <%= form_for hr, :url => reject_hat_request_url(:id => hr),
      :method => :post do |f| %>
        <div class="boxline">
          <%= f.label :link, t("ReasonLabel"), :class => "required" %>
          <%= f.text_area :rejection_comment, :rows => 4 %>
        </div>
        <p>
        <%= submit_tag t("RejectHatRequest") %>
        </p>
      <% end %>
    <% end %>
  <% end %>
</div>
